<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Movie - ERN CINEMA</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body class="bg-primary text-gray-200 fog-effect overflow-y-auto" style="height:auto;">
    <custom-navbar></custom-navbar>

    <main class="container mx-auto px-4 py-12 max-w-5xl">
        <div class="mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-white mb-2">Edit Movie</h1>
            <p class="text-gray-400">Update movie details in the catalog</p>
        </div>

        <div class="card p-6 md:p-8 fog-effect">
            <form method="POST" action="/movies/update/{{ movie.movie_id }}" id="updateMovieForm">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    
                    <div>
                        <label class="form-label">Movie ID</label>
                        <input type="text" class="form-input bg-gray-700" value="{{ movie.movie_id }}" readonly>
                    </div>

                    <div>
                        <label class="form-label">Title *</label>
                        <input type="text" name="title" value="{{ movie.title }}" required class="form-input">
                    </div>

                    <div>
                        <label class="form-label">Director *</label>
                        <input type="text" name="director" value="{{ movie.director }}" required class="form-input">
                    </div>

                    <div>
                        <label class="form-label">Duration (minutes) *</label>
                        <input type="number" name="duration_minutes" value="{{ movie.duration_minutes }}" required class="form-input">
                    </div>

                    <div>
                        <label class="form-label">Genre *</label>
                        <input type="text" name="genre" value="{{ movie.genre }}" required class="form-input">
                    </div>

                    <div>
                        <label class="form-label">Age Rating *</label>
                        <select name="age_rating" class="form-input" required>
                            <option value="G" {% if movie.age_rating == 'G' %}selected{% endif %}>G - General Audiences</option>
                            <option value="PG" {% if movie.age_rating == 'PG' %}selected{% endif %}>PG - Parental Guidance</option>
                            <option value="PG-13" {% if movie.age_rating == 'PG-13' %}selected{% endif %}>PG-13 - Parents Strongly Cautioned</option>
                            <option value="R" {% if movie.age_rating == 'R' %}selected{% endif %}>R - Restricted</option>
                            <option value="NC-17" {% if movie.age_rating == 'NC-17' %}selected{% endif %}>NC-17 - Adults Only</option>
                        </select>
                    </div>

                    <div class="md:col-span-2">
                        <label class="form-label">Release Date *</label>
                        <input type="date" name="release_date" value="{{ movie.release_date }}" required class="form-input">
                    </div>

                    <div class="md:col-span-2">
                        <label class="form-label">Description</label>
                        <textarea name="description" rows="4" class="form-textarea">{{ movie.description }}</textarea>
                    </div>

                    <div class="md:col-span-2">
                        <label class="form-label">Poster URL</label>
                        <input type="text" name="poster_url" value="{{ movie.poster_url }}" class="form-input" placeholder="https://...">
                    </div>

                    {% if movie.poster_url %}
                    <div class="md:col-span-2 flex justify-center mt-4">
                        <img src="{{ movie.poster_url }}" alt="Poster Preview" class="rounded-lg shadow-lg w-48 h-auto border border-gray-700">
                    </div>
                    {% endif %}
                </div>

                <div class="flex flex-col sm:flex-row gap-4 mt-8">
                    <button type="submit" class="btn-primary flex-1 flex items-center justify-center glow-on-hover">
                        <i data-feather="save" class="w-5 h-5 mr-2"></i>
                        Save Changes
                    </button>
                    <a href="{{ url_for('show_movies') }}" class="btn-ghost flex-1 flex items-center justify-center">
                        <i data-feather="x" class="w-5 h-5 mr-2"></i>
                        Cancel
                    </a>
                </div>
            </form>
        </div>
    </main>

    <custom-footer></custom-footer>
    <script src="{{ url_for('static', filename='js/components/navbar.js') }}"></script>
    <script src="{{ url_for('static', filename='js/components/footer.js') }}"></script>
    <script>feather.replace();</script>
</body>
</html>
